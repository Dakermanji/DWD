<!-- Auth Modal -->
<div
	class="modal fade"
	id="authModal"
	tabindex="-1"
	aria-labelledby="authModalLabel"
	aria-hidden="true"
>
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header border-bottom-0">
				<h5 class="modal-title" id="authModalLabel">
					<i class="bi bi-unlock me-1"></i> <%= __('auth.title') %>
				</h5>
				<button
					type="button"
					class="btn-close"
					data-bs-dismiss="modal"
					aria-label="Close"
				></button>
			</div>

			<div class="modal-body pt-0">
				<ul class="nav nav-tabs mb-3" id="authTab" role="tablist">
					<li class="nav-item" role="presentation">
						<button
							class="nav-link active"
							id="login-tab"
							data-bs-toggle="tab"
							data-bs-target="#loginTab"
							type="button"
							role="tab"
						>
							<i class="bi bi-box-arrow-in-right me-1"></i> <%=
							__('auth.login') %>
						</button>
					</li>
					<li class="nav-item" role="presentation">
						<button
							class="nav-link"
							id="register-tab"
							data-bs-toggle="tab"
							data-bs-target="#registerTab"
							type="button"
							role="tab"
						>
							<i class="bi bi-person-plus me-1"></i> <%=
							__('auth.register') %>
						</button>
					</li>
				</ul>

				<div class="tab-content" id="authTabContent">
					<!-- Login Form -->
					<div
						class="tab-pane fade show active"
						id="loginTab"
						role="tabpanel"
					>
						<form action="/auth/login" method="POST" novalidate>
							<div class="mb-3">
								<label for="identifier" class="form-label">
									<%= __('auth.identifier') %>
								</label>
								<input
									type="text"
									class="form-control"
									id="identifier"
									name="identifier"
									value="<%= identifier || '' %>"
									autocomplete="username"
									required
								/>
							</div>

							<div class="mb-3">
								<label for="password" class="form-label"
									><%= __('auth.password') %></label
								>
								<input
									type="password"
									class="form-control"
									id="password"
									name="password"
									autocomplete="current-password"
									required
								/>
							</div>

							<div class="d-grid">
								<button type="submit" class="btn btn-primary">
									<i
										class="bi bi-box-arrow-in-right me-1"
									></i>
									<%= __('auth.login') %>
								</button>
							</div>
						</form>
					</div>

					<!-- Register Form (email only) -->
					<div class="tab-pane fade" id="registerTab" role="tabpanel">
						<form
							action="/auth/register/email"
							method="POST"
							novalidate
						>
							<div class="mb-3">
								<label for="registerEmail" class="form-label"
									><%= __('auth.email') %></label
								>
								<input
									type="email"
									class="form-control"
									id="registerEmail"
									name="email"
									value="<%= registerEmail || '' %>"
									required
								/>
							</div>

							<div class="d-grid">
								<button type="submit" class="btn btn-primary">
									<i class="bi bi-envelope-check me-1"></i>
									<%= __('auth.send_signup_link') %>
								</button>
							</div>
						</form>
					</div>
				</div>

				<p class="with-line">
					<span class="line"></span>
					<%= __('auth.or_continue_with') %>
					<span class="line"></span>
				</p>

				<div class="text-center d-flex">
					<a
						href="/auth/google"
						class="btn btn-outline-danger w-100 <%= currentLocale === 'ar'? 'ms-1' : 'me-1'%>"
					>
						<i class="bi bi-google"></i> Google
					</a>
					<a
						href="/auth/github"
						class="btn btn-outline-dark w-100 <%= currentLocale === 'ar'? 'me-1' : 'ms-1'%>"
					>
						<i class="bi bi-github"></i> GitHub
					</a>
				</div>
			</div>
			<p class="text-center mt-3">
				<a href="#" id="trigger-reset-password-modal">
					<%= __('auth.forgot_password') %>
				</a>
			</p>
		</div>
	</div>
</div>

<div
	id="authModalState"
	data-tab="<%= authTab || '' %>"
	data-register-email="<%= registerEmail || '' %>"
	data-show="<%= showAuthModal ? 'true' : 'false' %>"
	hidden
>
</div>
